#import "EffectController.h"
#import "AgentTool.h"
#import "EffectDataManager.h"
#import "EffectNetManager.h"

#import "ShirtController.h"




@interface EffectController ()
<UITextFieldDelegate>


@property (nonatomic, assign) BOOL acceptableClose;
@property (nonatomic, assign) NSInteger nowNumber;
@property (nonatomic, assign) double succeedDeepRecCount;
@property (nonatomic, strong) NSString *trapContent;
@property (nonatomic, strong) NSMutableArray *grantedArray;
@property (nonatomic, strong) NSMutableDictionary *shadowinessDictionary;

@property (nonatomic, strong) UILabel *viewLabel;
@property (nonatomic, strong) UIImageView *riseImageView;
@property (nonatomic, strong) UIButton *flagExperienceButton;
@property (nonatomic, strong) UIView *acceptView;



@property (nonatomic, assign) double liableMagnitude;

@property (nonatomic, strong) NSMutableArray *seedArray;


@property (nonatomic, strong) UILabel *activeLabel;
@property (nonatomic, strong) UIImageView *materialImageView;
@property (nonatomic, strong) UIButton *rateButton;


- (BOOL)unlessSwitch;
- (NSInteger)secondarySum;
- (double)boardNumber;
- (NSString *)masterName;
- (NSMutableArray *)redArray;
- (NSMutableDictionary *)leagueDictionary;

- (void)soundCallback;
- (void)modifyAction:(id)sender;
- (void)statisticalMethodRestore;
















@property (nonatomic, strong) EffectDataModel *_Nullable agentBindDataModel;


@property (nonatomic, strong) EffectView *regularView;
@property (nonatomic, strong) ShirtController *rueController;


@end

@implementation EffectController



- (void)viewDidLoad {
    [super viewDidLoad];
    //: property_init

    self.nativeQuantity = 23;
    self.soapDeepTitle = @"nil";
    self.nilPowderArray = [NSMutableArray array];
    self.aloneGalleryDictionary = [NSMutableDictionary dictionary];
    //: base_init
    
        
        
        self.acceptableClose = NO;
        self.nowNumber = (1 << 9);
        self.succeedDeepRecCount = 373.51;
        self.trapContent = @"%u";
        self.grantedArray = [NSMutableArray array];
        self.shadowinessDictionary = [NSMutableDictionary dictionary];
        self.liableMagnitude = 329.17;
        self.seedArray = [NSMutableArray array];
        self.twentyModel = [[EffectModel alloc] init];
        self.riseImageView = [[UIImageView alloc] initWithFrame:self.view.superview.frame];
        self.riseImageView.image = [UIImage imageNamed:@"context_icon"];
        UIImageView *temp;
        temp = self.riseImageView;
        self.riseImageView.alpha = self.riseImageView.alpha + CGRectGetMidX(self.riseImageView.bounds);
        [self.view addSubview: self.riseImageView];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(modifyAction:) name:@"kNotificationNonrecreationalName" object:nil];
        [self addObserver:self forKeyPath:@"grantedArray" options:NSKeyValueObservingOptionInitial context:nil];
        [self.twentyModel addObserver:self forKeyPath:@"diverArray" options:NSKeyValueObservingOptionNew context:nil];
    //: other_init
    
        
        
        
        
        
        
        UITextField *insertTextField = [[UITextField alloc] initWithFrame:CGRectUnion(self.view.frame, CGRectMake(84.32, 450.41, 323.44, 192.86))];
        insertTextField.text = @"nuclear";
        insertTextField.placeholder = @"coordinatorMove";
        insertTextField.delegate = self;
        [self.view addSubview:insertTextField];
    //: private_init
    self.agentBindDataModel = [[EffectDataModel alloc] init];
        self.regularView = [[EffectView alloc] initWithFrame:CGRectInset(self.view.superview.frame, 484.01, 48.07)];
        [self.regularView shirtModel:self.twentyModel];
    [self.view addSubview:self.regularView];
}


- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
}








- (void)updateViewConstraints {
    [super updateViewConstraints];
        double insertInterval = [self boardNumber];
        double insertBegin = insertInterval / 4.34;
        double insertEnd = insertInterval - insertBegin;
        [UIView animateKeyframesWithDuration:insertInterval delay:[self nowNumber] options:UIViewKeyframeAnimationOptionBeginFromCurrentState animations:^{
            [UIView addKeyframeWithRelativeStartTime:0 relativeDuration:insertBegin animations:^{
        self.viewLabel.size = CGSizeMake(+[self boardNumber], -[self boardNumber]);
            }];
            [UIView addKeyframeWithRelativeStartTime:insertBegin relativeDuration:insertEnd animations:^{
        self.riseImageView.backgroundColor = [UIColor lightGrayColor];
            }];
            [UIView performWithoutAnimation:^{
        self.acceptView.transform = CGAffineTransformIdentity;
            }];
        } completion:^(BOOL finished) {
            self.acceptableClose = finished;
        }];
}







- (void)dealloc {
        NSLog(@"delloc: %@", self);
        [[NSNotificationCenter defaultCenter] removeObserver:self name:@"kNotificationNonrecreationalName" object:nil];
        [self removeObserver:self forKeyPath:@"grantedArray"];
        [self.twentyModel removeObserver:self forKeyPath:@"diverArray"];
}

#pragma mark - *** GET Value ***

- (BOOL)unlessSwitch {
        return self.acceptableClose;
}

- (NSInteger)secondarySum {
        return (1 << 7);
}

- (double)boardNumber {
        self.liableMagnitude *= (1 << 5);
        return self.liableMagnitude;
}

- (NSString *)masterName {
        const NSStringEncoding *historyEncodings = [NSString availableStringEncodings];
        for (int i = 0; historyEncodings[i] != 0; i++) {
            NSStringEncoding encoding = historyEncodings[i];
            if (encoding == NSUTF8StringEncoding){
                self.trapContent = [NSString localizedNameOfStringEncoding:encoding];
            }
        }

        return self.trapContent;
}

- (NSMutableArray *)redArray {
        [self.grantedArray removeObjectIdenticalTo:self.grantedArray[(1 << 6)]];
        return self.grantedArray;
}

- (NSMutableDictionary *)leagueDictionary {
        NSArray *selected = [self.shadowinessDictionary keysSortedByValueWithOptions:NSSortConcurrent usingComparator:^NSComparisonResult (id _Nonnull obj1, id _Nonnull obj2) {
            return NSOrderedSame;
        }];
        [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:@"listener" object:[NSNumber numberWithInteger:selected.count]]];
        return self.shadowinessDictionary;
}

#pragma mark - *** Function ***

- (void)soundCallback {
        self.acceptableClose = self.pokeSolarDoing([self unlessSwitch]);
        self.nowNumber = self.panTweenDingMagnitude([self secondarySum]);
        self.trapContent = self.sessionText([self masterName]);
        self.grantedArray = self.beautifulArray([self redArray]);
        self.seedArray = self.beautifulArray([self redArray]);
}

- (void)modifyAction:(id)sender {
        if (self.flagExperienceButton.isFirstResponder) {
            [self.flagExperienceButton resignFirstResponder];
        }



}


- (void)statisticalMethodRestore {
        [self soundCallback];
        [UIView animateWithDuration:[self nowNumber] animations:^{
        [self activeLabel].size = CGSizeMake(+[self boardNumber], -[self boardNumber]);
        [self materialImageView].center = CGPointMake(0, 0);
        [self rateButton].left = -[self boardNumber];
        } completion:^(BOOL finished) {
            self.acceptableClose = finished;
        }];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"kNotificationNonrecreationalName" object:nil userInfo:[self shadowinessDictionary]];
        self.rueController = [[ShirtController alloc] init];
        ShirtModel *insertModel = [[ShirtModel alloc] initWithDictionary:[self leagueDictionary]];
        self.rueController.twentyModel = insertModel;
        [[AgentTool currentNavigationController] pushViewController:self.rueController animated:1];
}

#pragma mark - *** Public ***




- (void)setNativeQuantity:(NSInteger)nativeQuantity {
    _nativeQuantity = nativeQuantity;
        self.nowNumber = nativeQuantity;
        NSArray *improbableArray = [self.shadowinessDictionary objectsForKeys:@[@"%ld"] notFoundMarker:[NSNull null]];
        [[NSUserDefaults standardUserDefaults] setInteger:improbableArray.count forKey:@"show"];
        self.twentyModel.pullOutsideSkipEnable = [self unlessSwitch];
}






- (void)setSoapDeepTitle:(NSString *)soapDeepTitle {
    _soapDeepTitle = soapDeepTitle;
        self.trapContent = soapDeepTitle;
        self.acceptableClose = YES;
        self.twentyModel.diverArray = [self redArray];
}




- (void)setNilPowderArray:(NSMutableArray *)nilPowderArray {
    _nilPowderArray = nilPowderArray;
        self.grantedArray = nilPowderArray;
        self.seedArray = nilPowderArray;
        self.nowNumber /= 49;
        [self.twentyModel gardenReset];
}




- (void)setAloneGalleryDictionary:(NSMutableDictionary *)aloneGalleryDictionary {
    _aloneGalleryDictionary = aloneGalleryDictionary;
        self.shadowinessDictionary = aloneGalleryDictionary;
        self.acceptableClose = !self.acceptableClose;
        [self.twentyModel gardenReset];
}



- (void)eachSuccess {
        [self.flagExperienceButton setTitle:@"report" forState:UIControlStateFocused];
}


- (void)atError {
        NSArray *teacherKnow = [self.grantedArray subarrayWithRange:NSMakeRange(76, 0)];
        [self.grantedArray replaceObjectsInRange:NSMakeRange(0, 15) withObjectsFromArray:teacherKnow];
}













#pragma mark - *** KVO ***

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary<NSKeyValueChangeKey, id> *)change context:(void *)context {
        id enablee = [change objectForKey:NSKeyValueChangeIndexesKey];
        if (enablee) {
        double insertInterval = [self boardNumber];
        double insertBegin = insertInterval / 4.62;
        double insertEnd = insertInterval - insertBegin;
        [UIView animateKeyframesWithDuration:insertInterval delay:[self nowNumber] options:UIViewKeyframeAnimationOptionCalculationModeDiscrete animations:^{
            [UIView addKeyframeWithRelativeStartTime:0 relativeDuration:insertBegin animations:^{
        self.acceptView.transform = CGAffineTransformIdentity;
            }];
            [UIView addKeyframeWithRelativeStartTime:insertBegin relativeDuration:insertEnd animations:^{
        self.riseImageView.backgroundColor = [UIColor cyanColor];
            }];
            [UIView performWithoutAnimation:^{
        self.riseImageView.backgroundColor = [UIColor redColor];
            }];
        } completion:^(BOOL finished) {
            self.acceptableClose = finished;
        }];
        }
        
        
        if ([keyPath hasSuffix:@"log"]) {
        NSInteger reluctant = [self.acceptView constraintsAffectingLayoutForAxis:UILayoutConstraintAxisHorizontal].count;
        [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:@"voluntary" object:nil userInfo:@{@"can": [NSNumber numberWithInteger:reluctant]}]];
        }
        
        
        
        
        
        
        [[NSUserDefaults standardUserDefaults] setObject:change forKey:@"possibility"];
        [[NSUserDefaults standardUserDefaults] setObject:[NSString stringWithFormat:@"%@", context] forKey:@"several"];
}




#pragma mark - *** UITextFieldDelegate ***




- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
        return true;
}





- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
        if (false) {
            return YES;
        }
        return NO;
}




- (BOOL)textFieldShouldClear:(UITextField *)textField {
        return [self unlessSwitch];
}



- (BOOL)textFieldShouldReturn:(UITextField *)textField {
        [textField resignFirstResponder];
        [self statisticalMethodRestore];
        return [self unlessSwitch];
}




















@end
